<html lang=en>
<head>
<meta charset=utf-8>
    <title>Efil</title>
    </head>
    <body onload="init()">
 
 
<script>
        var canvas, ctx, container;
         canvas = document.createElement( 'canvas' );
          ctx = canvas.getContext("2d");
    var balls;
    var message;
	var start_time;
    var number_of_balls;
	var first_ball;
	var second_ball;
	var force_bit_speed;
 /*   
    var gravity = 0.5;  
    var bounce = 0.7; */
    var xFriction = 0.1;
 
    function init(){
       setupCanvas();
	   start_time = new Date().getTime();
	   force_bit_speed = 1;
      //vy = (Math.random() * -15) + -5;
	  first_ball = {vx:0, vy:0, x:400, y:400, radius:20, status: 0,   color:"red"};
	  second_ball = {vx:0, vy:0, x:200, y:300, radius:20, status: 0,   color:"red"};
       balls = 
	   [
	   //{vx:1, vy:30, x:canvas.width / 2, y:100, radius:20, status: 0,   color:"red"}
	   ];
	   let random_x, random_y;


/*	   for (let i = 0; i < 10; i++) {
		random_x = Math.random()*600;
		random_y = Math.random()*600;
		balls.push({vx:0, vy:force_bit_speed, x:random_x, y:random_y, radius:1, status:0, color:"red"})
	   }
	   
	   */
	   
	   
	   number_of_balls = 0;
	   message = "efilism";
 
    }//end init method
 
    function draw() {
        ctx.clearRect(0,0,canvas.width, canvas.height); 
        //display some text

	       ctx.fillStyle = "blue";
           ctx.font = "20px Arial";
           ctx.fillText(message, 20,20); 

       
 
             //draw balls
			 
			ctx.beginPath();
			ctx.arc(first_ball.x, first_ball.y, first_ball.radius, 0, Math.PI*2, false);
			ctx.fillStyle = "blue";
			ctx.fill();
			ctx.closePath();
			
			ctx.beginPath();
			ctx.arc(second_ball.x, second_ball.y, second_ball.radius, 0, Math.PI*2, false);
			ctx.fillStyle = "blue";
			ctx.fill();
			ctx.closePath();
			
			for (let i = 0; i < balls.length; i++) {
				ctx.beginPath();
				ctx.arc(balls[i].x, balls[i].y, balls[i].radius, 0, Math.PI*2, false);
				ctx.fillStyle = "blue";
				ctx.fill();
				ctx.closePath();
			}
			/*ctx.beginPath();
			ctx.arc(balls[1].x, balls[1].y, balls[1].radius, 0, Math.PI*2, false);
			//ctx.arc(500,200,10,0, Math.PI*2, false);
            ctx.fillStyle = "blue";
            ctx.fill();
            ctx.closePath();*/
        
        ballMovement();
 
    }
 
    setInterval(draw, 1000/35); 
    
    
    
    
    function ballMovement(){

	   var current_time = new Date().getTime();
	   var time =  current_time - start_time;	  
		time = time/10;
	   
        
        //If either wall is hit, change direction on x axis
		
		//first_ball.x = time/19;
		//first_ball.y = 400 - time/10 + time*time/100000;
		
		first_ball.y += first_ball.vy;
		first_ball.x += first_ball.vx;
		second_ball.y += second_ball.vy;
		second_ball.x += second_ball.vx;
		for (let i = 0; i < balls.length; i++) {
			if (balls[i].y > 2000 || balls[i].y < -200) {
				//balls[i].y = 0;
				balls.shift();
				number_of_balls--;
			}
			if (balls[i].x > 2000 || balls[i].x < -200) {
				balls.shift();
				number_of_balls--;
			}
			balls[i].y += balls[i].vy;
			balls[i].x += balls[i].vx;
			if ((balls[i].y >= first_ball.y - first_ball.radius && balls[i].y <= first_ball.y + first_ball.radius) && (balls[i].x >= first_ball.x - first_ball.radius && balls[i].x <= first_ball.x + first_ball.radius)) {
				first_ball.vy += balls[i].vy/100;
				balls[i].vy = -balls[i].vy;
				balls[i].y += balls[i].vy;
			}
			if ((balls[i].x >= first_ball.x - first_ball.radius && balls[i].x <= first_ball.x + first_ball.radius) && (balls[i].y >= first_ball.y - first_ball.radius && balls[i].y <= first_ball.y + first_ball.radius)) {
				first_ball.vx += balls[i].vx/100;
				balls[i].vx = -balls[i].vx;
				balls[i].x += balls[i].vx;
			}
			if ((balls[i].y >= second_ball.y - second_ball.radius && balls[i].y <= second_ball.y + second_ball.radius) && (balls[i].x >= second_ball.x - second_ball.radius && balls[i].x <= second_ball.x + second_ball.radius)) {
				second_ball.vy += balls[i].vy/100;
				balls[i].vy = -balls[i].vy;
				balls[i].y += balls[i].vy;
			}
			if ((balls[i].x >= second_ball.x - second_ball.radius && balls[i].x <= second_ball.x + second_ball.radius) && (balls[i].y >= second_ball.y - second_ball.radius && balls[i].y <= second_ball.y + second_ball.radius)) {
				second_ball.vx += balls[i].vx/100;
				balls[i].vx = -balls[i].vx;
				balls[i].x += balls[i].vx;
			}
		}
		
		for (let i = 1; i < 2; i++) {
		
			for (let j = 0; j < 3; j++) {
				random_x = Math.random()*600;
				random_y = Math.random()*20;
				balls.push({vx:0, vy:force_bit_speed, x:random_x, y:random_y, radius:1, status:0, color:"red"});
				number_of_balls++;
			}
			
			random_x = Math.random()*600;
			random_y = Math.random()*20 + 580;
			balls.push({vx:0, vy:-force_bit_speed, x:random_x, y:random_y, radius:1, status:0, color:"red"});
			number_of_balls++;
			
			random_x = Math.random()*20;
			random_y = Math.random()*600;
			//balls.push({vx:force_bit_speed, vy:0, x:random_x, y:random_y, radius:1, status:0, color:"red"});
			number_of_balls++;
			
			random_x = Math.random()*20 + 580;
			random_y = Math.random()*600;
			//balls.push({vx:-force_bit_speed, vy:0, x:random_x, y:random_y, radius:1, status:0, color:"red"});
			number_of_balls++;
		}
		
		//balls[0].x += 20*balls[0].vx;
		//balls[0].y += balls[0].vy;
		
		
        //balls[0].x = 100 + 40*Math.cos((balls[0].v_rot/4)*time/800);
		//balls[0].y = 200 + 40*Math.sin((balls[0].v_rot/4)*time/800);
		
		//balls[0].x += Math.abs((balls[0].v_total - balls[0].v_rot)*time/50);
		
		//balls[0].vx += balls[0].ax;
		//balls[0].vy += balls[0].ay;
		//continue here
        
          // balls[0] hits the floor
       
		var dt = new Date();
		message = "efil simulator";// + dt.getTime();
    }
    
 
     function setupCanvas() {//setup canvas
 
 
	container = document.createElement( 'div' );
	container.className = "container";
 
	canvas.width = window.innerWidth; 
	canvas.height = window.innerHeight; 
	document.body.appendChild( container );
	container.appendChild(canvas);	
 
	ctx.strokeStyle = "#ffffff";
	ctx.lineWidth =2;	
}
 
        </script>
    </body>
</html>